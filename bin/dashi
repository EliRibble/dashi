#!/usr/bin/env python
import asyncio
import bdb
import dashi.config
import dashi.debugging
import dashi.generator
import logging
import pdb
import sys


def main():
    logging.basicConfig()
    logging.getLogger().setLevel(logging.DEBUG)
    dashi.debugging.install_hook()

    config = dashi.config.parse()

    loop = asyncio.get_event_loop()
    try:
        loop.run_until_complete(dashi.generator.go(config))
    except bdb.BdbQuit:
        pass
    loop.close()


if __name__ == '__main__':
    main()
